<!DOCRTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Home Page</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<style>
			i{
				height: 1.45em;
			}
			.jumbotron{
				border: 1px solid black;
				background-color: white;
				width: 40em;	
			}
		</style>
	
		<script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
		<script type="text/javascript">
		
			var dataRef = new Firebase('https://rd-year-group-project.firebaseio.com');
			var address;
			var carerName;
			var carerId;
			var dob;
			var phoneNo;
			var name;
			var array = [];
			var tabBody=document.getElementsByTagName("tbody").item(0);
			
			function load(){
				var tableRef = dataRef.child("users/Patients").ref();
					tableRef.on("value", function(snapshot) {
						snapshot.forEach(function(childSnapshot){
							var userNameRef = dataRef.child("users/Patients/" + snapshot.key()).ref();
								userNameRef.on("child_added", function(snapshot1) {
									snapshot.forEach(function(childSnapshot1) {
										var childData = childSnapshot1.key();
										if(childData == "Address"){
											address = childSnapshot1.val();
										}
										if(childData == "Carer name"){
											carerName = childSnapshot1.val();
										}
										if(childData == "CarerID"){
											carerId = childSnapshot1.val();
										}
										if(childData == "DOB"){
											dob = childSnapshot1.val();
										}
										if(childData == "PhoneNo"){
											phoneNo = childSnapshot1.val();
										}
										if(childData == "name"){
											name = childSnapshot1.val();
										}
								});
							});
														
							row=document.createElement("tr");
							cell1 = document.createElement("td");
							cell2 = document.createElement("td");
							cell3 = document.createElement("td");
							cell4 = document.createElement("td");
							cell5 = document.createElement("td");
							cell6 = document.createElement("td");
							textnode1=document.createTextNode(address);
							textnode2=document.createTextNode(carerName);
							textnode3=document.createTextNode(carerId);
							textnode4=document.createTextNode(dob);
							textnode5=document.createTextNode(phoneNo);
							textnode6=document.createTextNode(name);
							cell1.appendChild(textnode1);
							cell2.appendChild(textnode2);
							cell3.appendChild(textnode3);
							cell4.appendChild(textnode4);
							cell5.appendChild(textnode5);
							cell6.appendChild(textnode6);
							row.appendChild(cell1);
							row.appendChild(cell2);
							row.appendChild(cell3);
							row.appendChild(cell4);
							row.appendChild(cell5);
							row.appendChild(cell6);
							console.log(row);
							array.push(row);
						});
					});
					
			}
			
			window.onload = function check(){
				load();
				setTimeout(function(){
					for(i = 0; i < array.length; i++){
						console.log(array[i]);
						tabBody.appendChild(array[i]);
					}
				}, 5000);
			}
		</script>
	</head>
	<body>
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">WebSiteName</a>
				</div>
				<ul class="nav navbar-nav">
					<li class="active"><a href="#">Home</a></li>
				</ul>
				
				<ul class="nav navbar-nav navbar-right">
					<form class="navbar-form" role="search">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
							<div class="input-group-btn">
								<button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
							</div>
						</div>
					</form>
				</ul>	
			</div>
		</nav>
		
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<a class="twitter-timeline" data-lang="en" data-width="500" data-height="1000" href="https://twitter.com/3rdYearProject?ref_src=twsrc%5Etfw">Tweets by 3rdYearProject</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
				</div>
				<div class="col-md-8">
					<div>
					<iframe src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FVCA-145227902895333%2F&tabs=timeline&width=340&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId" width="340" height="500" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true"></iframe>
					</div>
					<div class="container">
						<table class="table" id="myTable">
							<thead>
								<tr>
									<th>Address</th>
									<th>Carer Name</th>
									<th>Carer ID</th>
									<th>DOB</th>
									<th>Phone No</th>
									<th>Name</th>
								</tr>
							</thead>
							<tbody>
								
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>